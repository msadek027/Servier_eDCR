@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="box-header with-border">

    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-2 col-lg-2"><div id="MessageText"></div></div>
        <div class="col-xs-0 col-sm-0 col-md-10 col-lg-10">
            <div style="text-align:right;">
                <input type="checkbox" id="IsActive" class="chk" name="IsActive"> <label for="IsActive"> Hide</label>
                <button id="btnExcel" class="btn btn-primary btn-sm" name="ExportType" value="Excel" type="submit"><i class="glyphicon glyphicon-envelope"></i> Excel </button>
                <button id="btnPDF" class="btn btn-primary btn-sm" name="ExportType" value="PDF" type="submit"><i class="glyphicon glyphicon-book"></i> PDF </button>
                <button id="btnView" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-file"></i> View</button>
            </div>
        </div>
    </div>
</div>
<div class="box-body">
    <div class="row"><div id="MessageText"></div>    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Master Data:</div>
        <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3">
            <select id="ItemTypeName" name="ItemTypeName" class="RequiredField form-control">
                <option value="Product">Product</option>
                <option value="Gift">Gift</option>
            </select>
        </div>
        <div class="col-xs-0 col-sm-0 col-md-2 col-lg-2"> </div>
        <div class="col-xs-0 col-sm-0 col-md-2 col-lg-2"></div>
        <div class="col-xs-0 col-sm-0 col-md-2 col-lg-2"> </div>      
    </div>
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div id="MainGrid" class="MainGrid"></div>
        </div>
    </div>


</div>

<div id="divLoading" style="margin: 0px; padding: 0px; position: fixed; right: 0px;
    top: 0px; width: 100%; height: 100%; background-color: #666666; z-index: 30001;
    opacity: .8; filter: alpha(opacity=70);display:none">
    <p style="position: absolute; top: 50%; left: 50%; color: White;">
        <img src="~/Content/Images/loading.gif" />
    </p>
</div>
<script src="~/AdminLTE/plugins/jQuery/jquery-2.2.3.min.js"></script>
<link href="~/Content/CustomCSS/InputText.css" rel="stylesheet" />
<script src="~/Scripts/xlsx_0.7.12_xlsx.full.min.js"></script>
<script type="text/javascript">
        //// Start  $(document).ready(function ()
        $(document).ready(function () {

            $.ajaxSetup({
                beforeSend: function () {
                    $("#divLoading").show();
                },
                complete: function () {
                    $("#divLoading").hide();
                }
            });

         
            $('#btnExcel').click(function () {
                $("#MainGrid").getKendoGrid().saveAsExcel();
            });
            //***************view function*****************
            $('#btnView').click(function () {
                $('#MainGrid').data('kendoGrid').dataSource.filter([]);
                $('#MainGrid').data('kendoGrid').dataSource.data([]);

                var model = {};
                model.ItemTypeName = $('#ItemTypeName').val();

                $.ajax({
                    type: "POST",
                    url: "/ReportProductGiftItem/GetGridData",
                    data: JSON.stringify({ model: model }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        if (data != null) {
                            $("#MainGrid").data("kendoGrid").dataSource.data(data);
                        }
                        else {
                            AcknowledgeMsg();
                            toastr.warning("No Record Found!");
                        }
                    },

                });

            });


            //Initializing Main page details Kendo Grid Colums
            var MainGrid = $('#MainGrid').kendoGrid({
                dataSource: new kendo.data.DataSource({
                    batch: true,
                    schema: {
                        model: {
                            id: "ProductCode",
                            fields: {
                                ProductCode: { type: "string" },
                                ProductName: { type: "string" },
                                GenericName: { type: "string" },
                                BrandName: { type: "string" },
                                PackSize: { type: "string" },
                                MarketGroup: { type: "string" },
                                SBU: { type: "string" },
                                CostPerUnit: { type: "string" },
                        

                            }
                        }
                    },
                    pageSize: 10,
                }),
                pageable: {
                    //refresh: true,
                    pageSizes: true, buttonCount: 5
                },
                dataBound: function (e) {
                    AutoFitColumn(this.element[0].id);
                },
                edit: function (e) {
                    $('input[name = "ProductCode"]').attr("readonly", true);
                    $('input[name = "ProductName"]').attr("readonly", true);

                },
                scrollable: true,
                sortable: true,
                filterable: false,
                editable: false,
                selectable: "row",
                //selectable: "multiple",
                toolbar: [{ template: "<input type='text' id='txtGridProductName'  style='float:right' placeholder='Product Name...' class='k-textbox'>" },{ template: "<input type='text' id='txtGridProductCode'  style='float:right' placeholder='Product Code...' class='k-textbox'>" },],
                excel: {
                    fileName: "MasterData.xlsx",
                    allPages: true,
                    filterable: true
                },
                navigatable: true,
                //height: 120,
                //groupable: true,
                //groupable: { messages: { empty: "Tour Plan" } },
                columnMenu: false,
                reorderable: false,
                resizable: false,
                resize: function (e) {
                    var tableH = this.element.height();
                    var bodyH = this.table.height();
                    this.table.height(tableH + bodyH - 1);
                },
                columns: [
                    { field: "ProductCode", hidden: false, title: "ProductCode" },
                    { field: "ProductName", hidden: false, title: "ProductName" },
                    { field: "GenericName", hidden: false, title: "GenericName" },
                    { field: "BrandName", hidden: false, title: "BrandName" },
                    { field: "PackSize", hidden: false, title: "PackSize" },
                    { field: "MarketGroup", hidden: false, title: "MarketGroup" },
                    { field: "SBU", hidden: false, title: "SBU" },
                    { field: "CostPerUnit", hidden: false, title: "CostPerUnit" },
              ]
            }).data('kendoGrid');


            $("#txtGridProductName").keyup(function () {
                var val = $(this).val();
                $("#MainGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [                      
                        { field: "ProductName", operator: "contains", value: val },
                      

                    ]
                });
            });

            $("#txtGridProductCode").keyup(function () {
                var val = $(this).val();
                $("#MainGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [
                        { field: "ProductCode", operator: "contains", value: val },


                    ]
                });
            });





        });




</script>



