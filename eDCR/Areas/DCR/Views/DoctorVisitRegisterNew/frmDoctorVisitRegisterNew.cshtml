
@{

    Layout = "~/Views/Shared/_Layout.cshtml";
}



<script src="~/AdminLTE/plugins/jQuery/jquery-2.2.3.min.js"></script>
<link href="~/Content/CustomCSS/InputText.css" rel="stylesheet" />
<link href="~/Content/CustomCSS/exportPDF.css" rel="stylesheet" />
<script src="~/Scripts/CustomJS/DefaultValue.js"></script>
<style type="text/css">
    .user-photo {
        display: inline-block;
        width: 200px;
        height: 200px;
        /*border-radius: 50%;*/
        background-size: 32px 35px;
        background-position: center center;
        vertical-align: middle;
        line-height: 32px;
        box-shadow: inset 0 0 1px #999, inset 0 0 10px rgba(0,0,0,.2);
        margin-left: 5px;
    }

    .user-name {
        display: inline-block;
        vertical-align: middle;
        line-height: 32px;
        padding-left: 3px;
    }
</style>

<style>
    .k-grid .k-state-selected {
        background-color: white;
        color: black;
    }
</style>


<style>
    .has-success {
        background: white;
    }

    .has-error {
        /*background: red;*/
        border: 1px Solid red !important;
    }

    .k-grid-header .k-header {
        height: 15px;
        padding: 0;
    }

    .k-grid-header-wrap th {
        font-size: 14px;
        /*font-size: small !important;*/
    }

    .k-grid tbody tr {
        line-height: 10px;
        font-size: 13px;
    }

    .k-grid tbody td {
        padding: 3px;
    }
</style>

<script type="text/javascript">

    var ParameterReportHead = "";
    //// Start  $(document).ready(function ()
    $(document).ready(function () {

        $.ajaxSetup({
            beforeSend: function () {
                $("#divLoading").show();
            },
            complete: function () {
                $("#divLoading").hide();
            }
        });
        //$("#GrandTotal").kendoNumericTextBox({
        //    format: "n0",
        //    decimals: 0
        //});
        EventPermission();
      

        $('#IsActive').click(function () {
            if ($(this).is(':checked')) {
                $(this).siblings('label').html('Unhide');
                $('#divValueParameter').hide();
            }
            else {
                $(this).siblings('label').html('Hide');
                $('#divValueParameter').show();
            }
        });

        $(".datepicker").datepicker({
            format: " yyyy",
            viewMode: "years",
            minViewMode: "years",
            autoclose: true
        });
        EventPermission();
        $("#Year").val(yyyy);
        LoadMonth();

        function LoadMonth() {
            $.ajax({
                url: '/Default/GetGenMonth',
                type: 'GET',
                dataType: 'JSON',
                data: "{}",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $.each(data, function (i, item) {
                        $('#MonthNumber').append($('<option>', { value: item.MonthNumber, html: item.MonthName }, '<option/>'));
                    });
                },
                error: function () {
                    alert("Failed to load !!");
                }
            });
        }
        LoadRegion();


        function LoadRegion() {
            $.ajax({
                url: '/Default/GetRegion',
                type: 'get',
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $.each(data, function (i, item) {
                        $('#RegionCode').append($('<option>', { value: item.RegionCode, html: item.RegionName }, '<option/>'));
                        if (i === 0) {
                            LoadTM(item.RegionCode);
                        }
                        $('#RegionName').val(item.RegionName);
                    });
                },
                error: function () {
                    alert("Failed to load...");
                }
            });
        }
        $('#RegionCode').on('change', function () {
            LoadTM($(this).val());
            $('#RegionName').val($("#RegionCode option:selected").text());
        }).trigger('change');;

        function LoadTM(RegionCode) {
            $.ajax({
                url: '/Default/GetTerritoryFromRegion',
                data: { RegionCode: RegionCode },
                type: 'Post',
                dataType: 'json',
                success: function (data) {
                    $('#TerritoryManagerID').empty();
                    $.each(data, function (i, item) {

                        if (i === 0) {
                            if (data.length > 1) {
                                $('#TerritoryManagerID').append('<option value="" selected="selected"></option>');
                            }
                            LoadMPO(item.TerritoryManagerID);
                            $('#TerritoryManagerName').val(item.TerritoryManagerName);
                        }
                        $('#TerritoryManagerID').append($('<option>', { value: item.TerritoryManagerID, html: item.TerritoryManagerName }, '<option/>'));

                    });
                },
                error: function () {
                    alert("Failed to load...");
                }
            });
        }



        $('#TerritoryManagerID').on('change', function () {
            LoadMPO($(this).val());
            $('#TerritoryManagerName').val($("#TerritoryManagerID option:selected").text());
        }).trigger('change');;




        function LoadMPO(TerritoryManagerID) {

            $.ajax({
                url: '/Default/GetMPOPopupList',
                data: { TerritoryManagerID: TerritoryManagerID },
                type: 'Post',
                dataType: 'json',
                success: function (data) {
                    $('#MPGroup').empty();
                    $.each(data, function (i, item) {
                        if (i == 0) {
                            $('#MPGroup').append('<option value="" selected="selected"></option>');
                            $('#MPOName').val(item.MPOName);
                        }
                        $('#MPGroup').append($('<option>', { value: item.MPGroup, html: item.MPOName }, '<option/>'));

                    });
                },

                error: function () {
                    alert("Failed to load...");
                }
            });

        }
        LoadTM($("#RegionCode").val());
        LoadMPO($("#TerritoryManagerID").val());

        $('#MPGroup').on('change', function () {
            $('#MPOName').val($("#MPGroup option:selected").text());
        }).trigger('change');;
        $("#TerritoryManagerID,#MPGroup").on('change', function (e) {
            $('#MainGrid').data('kendoGrid').dataSource.filter([]);
            $('#MainGrid').data('kendoGrid').dataSource.data([]);

        });


        var gridInput = 0;
        function GridValidation() {
            gridInput = 0;
            var dataSource = $("#MainGrid").data("kendoGrid").dataSource;
            data = dataSource.data(); // Get Detail Grid Data
            if (dataSource.view().length <= 0) {
                gridInput = 1;
            }
        } 
      
     
        $('#btnSave').click(function () {

            GridValidation();
            var Input = InputValidation('MonthNumber') + InputValidation('Year') + InputValidation('TerritoryManagerName') + InputValidation('MPGroup');

            model = {};
            model.Year = $("#Year").val();
            model.MonthNumber = $("#MonthNumber").val();
            model.TerritoryManagerID = $("#TerritoryManagerID").val();
            model.MPGroup = $("#MPGroup").val();


            if (Input == 0 && gridInput == 0) {
                var dataSource = $("#MainGrid").data("kendoGrid").dataSource;
                var data = dataSource.data();

                $.ajax({
                    url: '/DoctorVisitRegisterNew/OperationsModeDVRWP',
                    data: JSON.stringify(model),
                    type: 'POST',
                    contentType: 'application/json;',
                    dataType: 'json',
                    success: function (data) {
                        if (data.Status == "Yes") {
                            OperationMsg(data.Mode);
                            toastr.success($("#MessageText").html());
                        }
                        else {
                            ErrorFrmServerMsg(data.Status);
                            toastr.warning($("#MessageText").html());
                        }

                    },
                    error: function () {
                        ErrorFrmClientMsg();
                        toastr.warning($("#MessageText").html());
                    },
                    // complete: function () { CompletedMsg(); },
                }); //End of ajax call

            }

            else {
                ValidationMsg();
                toastr.info($("#MessageText").html());
            }

        });



        //

        var MainGrid = $("#MainGrid").kendoGrid({
            dataSource: new kendo.data.DataSource({
                batch: true,
                schema: {
                    model: {
                        id: "DoctorID",
                        fields: {
                            SL: { type: "string" },
                            DoctorID: { type: "string" },
                            DoctorName: { type: "string" },
                            Potential: { type: "string" },
                            ShiftName: { type: "string" },
                            MPOCode: { type: "string" },
                            MPGroup: { type: "string" },
                            MED: { type: "Number" },
                            MEP: { type: "Number" },
                            MEE: { type: "Number" },
                            MEA: { type: "Number" },
                            MD: { type: "Number" },
                            ED: { type: "Number" },


                            md01: { type: "string" },
                            md02: { type: "string" },
                            md03: { type: "string" },
                            md04: { type: "string" },
                            md05: { type: "string" },
                            md06: { type: "string" },
                            md07: { type: "string" },
                            md08: { type: "string" },
                            md09: { type: "string" },
                            md10: { type: "string" },
                            md11: { type: "string" },
                            md12: { type: "string" },
                            md13: { type: "string" },
                            md14: { type: "string" },
                            md15: { type: "string" },
                            md16: { type: "string" },
                            md17: { type: "string" },
                            md18: { type: "string" },
                            md19: { type: "string" },
                            md20: { type: "string" },
                            md21: { type: "string" },
                            md22: { type: "string" },
                            md23: { type: "string" },
                            md24: { type: "string" },
                            md25: { type: "string" },
                            md26: { type: "string" },
                            md27: { type: "string" },
                            md28: { type: "string" },
                            md29: { type: "string" },
                            md30: { type: "string" },
                            md31: { type: "string" },

                            ed01: { type: "string" },
                            ed02: { type: "string" },
                            ed03: { type: "string" },
                            ed04: { type: "string" },
                            ed05: { type: "string" },
                            ed06: { type: "string" },
                            ed07: { type: "string" },
                            ed08: { type: "string" },
                            ed09: { type: "string" },
                            ed10: { type: "string" },
                            ed11: { type: "string" },
                            ed12: { type: "string" },
                            ed13: { type: "string" },
                            ed14: { type: "string" },
                            ed15: { type: "string" },
                            ed16: { type: "string" },
                            ed17: { type: "string" },
                            ed18: { type: "string" },
                            ed19: { type: "string" },
                            ed20: { type: "string" },
                            ed21: { type: "string" },
                            ed22: { type: "string" },
                            ed23: { type: "string" },
                            ed24: { type: "string" },
                            ed25: { type: "string" },
                            ed26: { type: "string" },
                            ed27: { type: "string" },
                            ed28: { type: "string" },
                            ed29: { type: "string" },
                            ed30: { type: "string" },
                            ed31: { type: "string" },
                        }
                    }
                },


                // pageSize: 10,
            }),
            pageable: {

                pageSizes: true, buttonCount: 5
            },
            dataBound: function (e) {
                AutoFitColumn(this.element[0].id);

                //var GrandTotal = 0;
                //var PIGridDataSource = $("#MainGrid").data("kendoGrid").dataSource;
                //var PIGridData = PIGridDataSource.data();
                //for (i = PIGridData.length - 1; i >= 0; i--) {
                //    var me = parseFloat(PIGridData[i].MED);
                //    GrandTotal = GrandTotal + me;
                //}
                //var GrandTotalValue = $("#GrandTotal").data("kendoNumericTextBox");
                //GrandTotalValue.value(GrandTotal);
            },
            scrollable: true,
            sortable: true,
            filterable: false,
            editable: false,
            selectable: "row",

            toolbar: [{ template: "<input type='text' id='txtMainGridDoctorName'  style='float:right' placeholder='Doctor Name...' class='k-textbox'>" },{ template: "<input type='text' id='txtMainGridDoctorId'  style='float:right' placeholder='Doctor Id...' class='k-textbox'>" },],


            columnMenu: false,
            reorderable: true,
            resizable: true,
            resize: function (e) {
                this.table.height(this.element.height() + this.table.height() - 1);
            },
            columns: [
                { field: "SL", title: "SL", locked: true },
                { field: "DoctorID", title: "DoctorID", hidden: true },
                { field: "DoctorName", title: "Doctor Name", locked: true },
                { field: "Potential", title: "Ca." },
                { field: "ShiftName", title: "Shift" },
                { field: "MPOCode", title: "MIO", hidden: false },
                { field: "MPGroup", title: "Group", hidden: true },
                { field: "MED", title: "MED" },
                { field: "MEP", title: "MEP" },
                { field: "MEE", title: "MEE" },
                { field: "MEA", title: "MEA" },
                {
                    title: "MORNING", headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;text-align: center;" },
                    columns: [
                        { field: "MD", title: "MD", width: 40 },
                        { field: "md01", title: "01", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd01'> ${md01} </a>" },
                        { field: "md02", title: "02", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd02'> ${md02} </a>" },
                        { field: "md03", title: "03", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd03'> ${md03} </a>" },
                        { field: "md04", title: "04", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd04'> ${md04} </a>" },
                        { field: "md05", title: "05", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd05'> ${md05} </a>" },
                        { field: "md06", title: "06", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd06'> ${md06} </a>" },
                        { field: "md07", title: "07", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd07'> ${md07} </a>" },
                        { field: "md08", title: "08", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd08'> ${md08} </a>" },
                        { field: "md09", title: "09", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd09'> ${md09} </a>" },
                        { field: "md10", title: "10", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd10'> ${md10} </a>" },
                        { field: "md11", title: "11", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd11'> ${md11} </a>" },
                        { field: "md12", title: "12", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd12'> ${md12} </a>" },
                        { field: "md13", title: "13", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd13'> ${md13} </a>" },
                        { field: "md14", title: "14", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd14'> ${md14} </a>" },
                        { field: "md15", title: "15", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd15'> ${md15} </a>" },
                        { field: "md16", title: "16", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd16'> ${md16} </a>" },
                        { field: "md17", title: "17", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd17'> ${md17} </a>" },
                        { field: "md18", title: "18", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd18'> ${md18} </a>" },
                        { field: "md19", title: "19", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd19'> ${md19} </a>" },
                        { field: "md20", title: "20", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd20'> ${md20} </a>" },
                        { field: "md21", title: "21", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd21'> ${md21} </a>" },
                        { field: "md22", title: "22", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd22'> ${md22} </a>" },
                        { field: "md23", title: "23", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd23'> ${md23} </a>" },
                        { field: "md24", title: "24", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd24'> ${md24} </a>" },
                        { field: "md25", title: "25", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd25'> ${md25} </a>" },
                        { field: "md26", title: "26", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd26'> ${md26} </a>" },
                        { field: "md27", title: "27", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd27'> ${md27} </a>" },
                        { field: "md28", title: "28", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd28'> ${md28} </a>" },
                        { field: "md29", title: "29", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd29'> ${md29} </a>" },
                        { field: "md30", title: "30", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd30'> ${md30} </a>" },
                        { field: "md31", title: "31", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinkmd31'> ${md31} </a>" },
                    ]
                },
                {
                    title: "EVENING", headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;text-align: center;" },
                    columns: [
                        { field: "ED", title: "ED", width: 40, },
                        { field: "ed01", title: "01", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked01'> ${ed01} </a>" },
                        { field: "ed02", title: "02", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked02'> ${ed02} </a>" },
                        { field: "ed03", title: "03", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked03'> ${ed03} </a>" },
                        { field: "ed04", title: "04", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked04'> ${ed04} </a>" },
                        { field: "ed05", title: "05", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked05'> ${ed05} </a>" },
                        { field: "ed06", title: "06", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked06'> ${ed06} </a>" },
                        { field: "ed07", title: "07", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked07'> ${ed07} </a>" },
                        { field: "ed08", title: "08", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked08'> ${ed08} </a>" },
                        { field: "ed09", title: "09", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked09'> ${ed09} </a>" },
                        { field: "ed10", title: "10", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked10'> ${ed10} </a>" },
                        { field: "ed11", title: "11", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked11'> ${ed11} </a>" },
                        { field: "ed12", title: "12", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked12'> ${ed12} </a>" },
                        { field: "ed13", title: "13", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked13'> ${ed13} </a>" },
                        { field: "ed14", title: "14", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked14'> ${ed14} </a>" },
                        { field: "ed15", title: "15", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked15'> ${ed15} </a>" },
                        { field: "ed16", title: "16", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked16'> ${ed16} </a>" },
                        { field: "ed17", title: "17", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked17'> ${ed17} </a>" },
                        { field: "ed18", title: "18", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked18'> ${ed18} </a>" },
                        { field: "ed19", title: "19", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked19'> ${ed19} </a>" },
                        { field: "ed20", title: "20", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked20'> ${ed20} </a>" },
                        { field: "ed21", title: "21", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked21'> ${ed21} </a>" },
                        { field: "ed22", title: "22", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked22'> ${ed22} </a>" },
                        { field: "ed23", title: "23", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked23'> ${ed23} </a>" },
                        { field: "ed24", title: "24", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked24'> ${ed24} </a>" },
                        { field: "ed25", title: "25", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked25'> ${ed25} </a>" },
                        { field: "ed26", title: "26", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked26'> ${ed26} </a>" },
                        { field: "ed27", title: "27", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked27'> ${ed27} </a>" },
                        { field: "ed28", title: "28", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked28'> ${ed28} </a>" },
                        { field: "ed29", title: "29", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked29'> ${ed29} </a>" },
                        { field: "ed30", title: "30", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked30'> ${ed30} </a>" },
                        { field: "ed31", title: "31", width: 40, template: "<a href='javascript:void(0)' style='text-decoration: underline;'  class='a:link btnLinked31'> ${ed31} </a>" },

                    ]
                },
            ],
        });



        $("#txtMainGridDoctorId").keyup(function () {
            var val = $(this).val();
            $("#MainGrid").data("kendoGrid").dataSource.filter({
                logic: "or",
                filters: [
                    { field: "DoctorID", operator: "contains", value: val },
                   
                ]
            });
        });

        $("#txtMainGridDoctorName").keyup(function () {
            var val = $(this).val();
            $("#MainGrid").data("kendoGrid").dataSource.filter({
                logic: "or",
                filters: [                
                    { field: "DoctorName", operator: "contains", value: val },

                ]
            });
        });



        //Initializing Main page details Kendo Grid Colums
        var PopupGrid = $('#PopupWindowGrid').kendoGrid({
            dataSource: new kendo.data.DataSource({
                batch: true,
                schema: {
                    model: {
                        id: "MPOCode",
                        fields: {
                            MasterSL: { type: "string" },
                            MPOCode: { type: "string" },
                            MPOName: { type: "string" },
                            MPGroup: { type: "string" },
                            MonthNumber: { type: "string" },
                            MonthName: { type: "string" },
                            Year: { type: "string" },
                            MasterStatus: { type: "string" }
                        }
                    }
                },
                pageSize: 20,
            }),
            pageable: {
                //refresh: true,
                pageSizes: true, buttonCount: 5
            },
            dataBound: function (e) {
                AutoFitColumn(this.element[0].id);

            },
            scrollable: true,
            sortable: false,
            filterable: false,
            editable: false,
            selectable: "row",
            //selectable: "multiple",
            toolbar: [{ template: "<input type='text' id='txtPopupInput'  style='float:right' placeholder='Search...' class='k-textbox'>" },],
            navigatable: true,

            columnMenu: false,
            reorderable: false,
            resizable: false,
            resize: function (e) {
                this.table.height(this.element.height() + this.table.height() - 1);
            },
            columns: [
                { field: "MasterSL", hidden: true, title: "MasterSL" },
                { field: "MPOCode", title: "MPO Code", hidden: true },
                { field: "MPOName", title: "MPO Name" },
                { field: "MPGroup", title: "MPGroup" },
                { field: "MonthNumber", title: "Month Number", hidden: true },
                { field: "MonthName", title: "Month" },
                { field: "Year", title: "Year" },
                { field: "MasterStatus", title: "Status", },

                { command: [{ name: "PreviewRow", text: "Approve", imageClass: "k-icon k-i-close", click: handleApprove }], title: "Approve", headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;text-align: center;" } },

            ]

        }).data('kendoGrid');

        function handleApprove(e) {
            e.preventDefault();
            var selectedItem = PopupGrid.dataItem($(e.currentTarget).closest("tr"));

            model = {};
            model.Year = selectedItem.Year;
            model.MonthNumber = selectedItem.MonthNumber;
            model.MPGroup = selectedItem.MPGroup;

            $.ajax({
                url: '/DoctorVisitRegisterNew/OperationsModeDVRWP',
                data: JSON.stringify(model),
                type: 'POST',
                contentType: 'application/json;',
                dataType: 'json',
                success: function (data) {
                    if (data.Status == "Yes") {
                        OperationMsg(data.Mode);
                        toastr.success($("#MessageText").html());
                    }
                    else {
                        ErrorFrmServerMsg(data.Status);
                        toastr.warning($("#MessageText").html());
                    }

                },
                error: function () {
                    ErrorFrmClientMsg();
                    toastr.warning($("#MessageText").html());
                },
                // complete: function () { CompletedMsg(); },
            }); //End of ajax call

            PopupWindow.close();
        };


        $("#PopupWindowGrid").click(function () {

            var gridData = $("#PopupWindowGrid").data("kendoGrid");
            var selectedItem = (gridData.dataItem(gridData.select())); //Selected Row

            var MPGroup = selectedItem.MPGroup;


            $("#MPGroup").val(selectedItem.MPGroup);
            $("#Year").val(selectedItem.Year);
            $("#MonthNumber").val(selectedItem.MonthNumber);
            $("#MasterStatus").val(selectedItem.MasterStatus);


            var model = {};
            model.Year = $("#Year").val();
            model.MonthNumber = $("#MonthNumber").val();
            model.TerritoryManagerID = $("#TerritoryManagerID").val();
            model.MPGroup = $("#MPGroup").val();
            model.MasterStatus = $("#MasterStatus").val();//selectedItem.MasterStatus;



            $('#MsgStatus').html('Status: ' + selectedItem.MasterStatus).css('color', 'green');

            PopupWindow.close();



            var Input = InputValidation('MonthNumber') + InputValidation('Year') + InputValidation('MPGroup');
            if (Input == 0) {
                MainGridView(model);
            }

            else {
                ValidationMsg();
                toastr.warning($("#MessageText").html());
            }
            $("#IsActive").click();


        });
        function ReloadData() {
            var model = {};
            model.Year = $("#Year").val();
            model.MonthNumber = $("#MonthNumber").val();
            model.TerritoryManagerID = $("#TerritoryManagerID").val();
            model.MPGroup = $("#MPGroup").val();
            model.MasterStatus = $("#MasterStatus").val();

            GetRelationalData(model.MPGroup);
            var Input = InputValidation('MonthNumber') + InputValidation('Year') + InputValidation('MPOName');
            if (Input == 0) {
                MainGridView(model);
            }
            else {
                ValidationMsg();
                toastr.warning($("#MessageText").html());
            }
        }
        var ReportHeader = "";
        $('#btnZoomingView').click(function () {

            if ($("#Year").val() != "" && $("#MonthNumber").val() != "") {
                ReportHeader = "Year-Month: " + $("#Year").val() + "-" + $("#MonthNumber").val()
            }
            if ($("#TerritoryManagerID").val() != "") {
                ReportHeader = ReportHeader + ", TM: " + $("#TerritoryManagerName").val();
            }
            if ($("#MarketCode").val() != "") {
                ReportHeader = ReportHeader + ", Market: " + $("#MarketName").val();
            }
            if ($("#MPGroup").val() != "") {
                ReportHeader = ReportHeader + ", MPO: " + $("#MPOName").val();
            }
            sessionStorage.setItem('keyYear', $("#Year").val());
            sessionStorage.setItem('keyMonthNumber', $("#MonthNumber").val());
            sessionStorage.setItem('keyTerritoryManagerID', $("#TerritoryManagerID").val());
            sessionStorage.setItem('keyMarketCode', $("#MarketCode").val());
            sessionStorage.setItem('keyMPGroup', $("#MPGroup").val());
            sessionStorage.setItem('keyReportHeader', ReportHeader);

            var Year = $("#Year").val();
            var MonthNumber = $("#MonthNumber").val();
            var TerritoryManagerID = $("#TerritoryManagerID").val();
            var MarketCode = $("#MarketCode").val();
            var MPGroup = $("#MPGroup").val();
            var Input = InputValidation('MonthNumber') + InputValidation('Year') + InputValidation('MPOName');
            if (Input == 0) {
                window.open("/DCR/DoctorVisitRegisterNew/frmDoctorVisitRegisterNew2?Year=" + Year + "&MonthNumber=" + MonthNumber + "&TerritoryManagerID=" + TerritoryManagerID + "&MarketCode=" + $("#MarketCode").val() + "&MPGroup=" + $("#MPGroup").val() + "");

            }

            else {
                ValidationMsg();
                toastr.warning($("#MessageText").html());
            }
        });


        $('#btnView').click(function () {

            $("body").addClass('sidebar-collapse').trigger('collapsed.pushMenu');

            $('#MainGrid').data('kendoGrid').dataSource.filter([]);
            $('#MainGrid').data('kendoGrid').dataSource.data([]);

            var model = {};

            model.Year = $("#Year").val();
            model.MonthNumber = $("#MonthNumber").val();
            model.MPGroup = $("#MPGroup").val();



            var Input = InputValidation('MonthNumber') + InputValidation('Year') + InputValidation('MPGroup');


            if (Input == 0) {
                MainGridView(model);
            }

            else {
                ValidationMsg();
                toastr.warning($("#MessageText").html());
            }

            $("#Year").val(model.Year);
        });

        $('#btnStatus').click(function () {
            var model = {};

            model.Year = $("#Year").val();
            model.MonthNumber = $("#MonthNumber").val();



            $('#MainGrid').data('kendoGrid').dataSource.filter([]);
            $('#MainGrid').data('kendoGrid').dataSource.data([]);

            var Input = InputValidation('MonthNumber') + InputValidation('Year');


            if (Input == 0) {
                PopupWindow.center();
                PopupWindow.open();
                $.ajax({
                    url: '/DoctorVisitRegisterNew/GetPopupView',
                    type: 'POST',
                    data: JSON.stringify({ model: model }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        if (data != "") {
                            $('#PopupWindowGrid').data('kendoGrid').dataSource.data(data);
                        }
                        else {
                            PopupWindow.close();
                            AcknowledgeMsg();
                            toastr.info($("#MessageText").html());
                        }

                    },
                    error: function () {
                        alert('Error occured!');
                    },

                });

            }

            else {
                ValidationMsg();
                toastr.warning($("#MessageText").html());
            }

            $("#Year").val(model.Year);
        });

        function MainGridView(model) {


            ParameterReportHead = "Month: " + $("#MonthNumber option:selected").html() + "-" + $("#Year").val() + ", MPO:" + $("#MPGroup option:selected").html() + ", TM: " + $('#TerritoryManagerName').val() + ", Region: " + $('#RegionName').val();

            $("#divLoading").show();
            $.ajax({
                type: "POST",
                url: "/DoctorVisitRegisterNew/GetMainGridData",
                data: JSON.stringify({ model: model }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.length > 0) {
                        $("#MainGrid").data("kendoGrid").dataSource.data(data);
                      
                    }
                    else {

                        if (model.MasterStatus == "Waiting") {
                            toastr.info("Waiting data not found!");
                        }
                        else {
                            AcknowledgeMsg();
                            toastr.info($("#MessageText").html());
                        }

                    }
                    $("#divLoading").hide();
                },

            });
        }


        $("#MainGrid").on("click", ".btnLinkmd01", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));

            //alert(dataItem.md01);
            //var str = "DPE"
            //for (var i = 0; i < str.length; i++) {
            //    if(str.charAt(i)=="E")
            //    {
            //        alert("okay");
            //    }
            //}
            //var row = grid.dataItem($(e.currentTarget).closest("tr"));
            //var rowIdx = $("tr", grid.tbody).index(row);
            //var colIdx = $("td", row).index(this);
            //alert(rowIdx + '-' + colIdx);
            GetDetailData(dataItem, dataItem.md01, "01", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd02", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md02, "02", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd03", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md03, "03", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd04", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md04, "04", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd05", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md05, "05", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd06", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md06, "06", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd07", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md07, "07", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd08", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md08, "08", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd09", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md09, "09", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd10", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md10, "10", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd11", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md11, "11", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd12", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md12, "12", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd13", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md13, "13", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd14", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md14, "14", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd15", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md15, "15", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd16", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md16, "16", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd17", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md17, "17", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd18", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md18, "18", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd19", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md19, "19", "m");
        });

        $("#MainGrid").on("click", ".btnLinkmd20", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md20, "20", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd21", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md21, "21", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd22", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md22, "22", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd23", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md23, "23", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd24", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md24, "24", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd25", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md25, "25", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd26", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md26, "26", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd27", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md27, "27", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd28", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md28, "28", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd29", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md29, "29", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd30", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md30, "30", "m");
        });
        $("#MainGrid").on("click", ".btnLinkmd31", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.md31, "31", "m");
        });
        $("#MainGrid").on("click", ".btnLinked01", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed01, "01", "e");
        });

        $("#MainGrid").on("click", ".btnLinked02", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed02, "02", "e");
        });
        $("#MainGrid").on("click", ".btnLinked03", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed03, "03", "e");
        });
        $("#MainGrid").on("click", ".btnLinked04", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed04, "04", "e");
        });

        $("#MainGrid").on("click", ".btnLinked05", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed05, "05", "e");
        });
        $("#MainGrid").on("click", ".btnLinked06", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed06, "06", "e");
        });
        $("#MainGrid").on("click", ".btnLinked07", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed07, "07", "e");
        });

        $("#MainGrid").on("click", ".btnLinked08", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed08, "08", "e");
        });
        $("#MainGrid").on("click", ".btnLinked09", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed09, "09", "e");
        });
        $("#MainGrid").on("click", ".btnLinked10", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed10, "10", "e");
        });

        $("#MainGrid").on("click", ".btnLinked11", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed11, "11", "e");
        });
        $("#MainGrid").on("click", ".btnLinked12", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed12, "12", "e");
        });
        $("#MainGrid").on("click", ".btnLinked13", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed13, "13", "e");
        });

        $("#MainGrid").on("click", ".btnLinked14", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed14, "14", "e");
        });
        $("#MainGrid").on("click", ".btnLinked15", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed15, "15", "e");
        });
        $("#MainGrid").on("click", ".btnLinked16", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed16, "16", "e");
        });

        $("#MainGrid").on("click", ".btnLinked17", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed17, "17", "e");
        });
        $("#MainGrid").on("click", ".btnLinked18", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed18, "18", "e");
        });
        $("#MainGrid").on("click", ".btnLinked19", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed19, "19", "e");
        });

        $("#MainGrid").on("click", ".btnLinked20", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed20, "20", "e");
        });
        $("#MainGrid").on("click", ".btnLinked21", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed21, "21", "e");
        });
        $("#MainGrid").on("click", ".btnLinked22", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed22, "22", "e");
        });
        $("#MainGrid").on("click", ".btnLinked23", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed23, "23", "e");
        });
        $("#MainGrid").on("click", ".btnLinked24", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed24, "24", "e");
        });
        $("#MainGrid").on("click", ".btnLinked25", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed25, "25", "e");
        });
        $("#MainGrid").on("click", ".btnLinked26", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed26, "26", "e");
        });
        $("#MainGrid").on("click", ".btnLinked27", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed27, "27", "e");
        });
        $("#MainGrid").on("click", ".btnLinked28", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed28, "28", "e");
        });
        $("#MainGrid").on("click", ".btnLinked29", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed29, "29", "e");
        });
        $("#MainGrid").on("click", ".btnLinked30", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed30, "30", "e");
        });
        $("#MainGrid").on("click", ".btnLinked31", function (e) {
            var grid = $("#MainGrid").data("kendoGrid");
            var dataItem = grid.dataItem($(e.currentTarget).closest("tr"));
            GetDetailData(dataItem, dataItem.ed31, "31", "e");
        });
        //function LoadProduct(model) {
        //    $.ajax({
        //        type: "POST",
        //        url: "/DoctorVisitRegisterNew/GetProduct",
        //        data: JSON.stringify({ model: model }),
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (data) {
        //            $('#ProductCode').empty();
        //            $.each(data, function (i, item) {
        //                $('#ProductCode').append($('<option>', { value: item.ProductCode, html: item.ProductName }, '<option/>'));
        //            });
        //        },
        //        error: function () {
        //            alert("Failed to load !!");
        //        }
        //    });
        //}

        function GetDetailData(dataItem, vCellValue, DayNumber, ShiftName) {

            if (dataItem.ShiftName == ShiftName) {
                ValueUpdateOnNewWindow(dataItem, vCellValue, DayNumber, ShiftName)
                DetailPopupWindow.center();
                DetailPopupWindow.open();
                SetButtonAction(vCellValue);
            }
            else if (dataItem.ShiftName == "e,m") {
                ValueUpdateOnNewWindow(dataItem, vCellValue, DayNumber, ShiftName)
                DetailPopupWindow.center();
                DetailPopupWindow.open();
                SetButtonAction(vCellValue);
            }
            else {
                toastr.info("No entitled!");
            }

        }

        function ValueUpdateOnNewWindow(dataItem, vCellValue, DayNumber, ShiftName) {
            $('#WPGrid').data('kendoGrid').dataSource.filter([]);
            $('#WPGrid').data('kendoGrid').dataSource.data([]);
            var mLocationList = [];
            var eLocationList = [];

            var DoctorID = dataItem.DoctorID;
            var DoctorName = dataItem.DoctorName;
            var MPGroup = dataItem.MPGroup;

            var model = {};
            model.Year = $("#Year").val();
            model.MonthNumber = $("#MonthNumber").val();
            model.TerritoryManagerID = $("#TerritoryManagerID").val();

            model.MPGroup = dataItem.MPGroup;
            model.DoctorID = dataItem.DoctorID;



            model.DayNumber = DayNumber;
            model.ShiftName = ShiftName;

            var MonthNumber = $("#MonthNumber").val();
            var Year = $("#Year").val();
            var Parameter = "" + DoctorName + " (" + DoctorID + "), " + DayNumber + "-" + MonthNumber + "-" + Year + ", " + ShiftName + " [" + MPGroup + "]. ";
            $("#Parameter").html(Parameter);


            $('#ShiftName').val(ShiftName);
            $('#SetDate').val(DayNumber + "-" + MonthNumber + "-" + Year);
            $('#DoctorID').val(DoctorID);
            $('#DoctorName').val(DoctorName);
            $('#MPGroup').val(MPGroup);
            $('#vCellValue').val(vCellValue);

         //   LoadProduct(model);



            var value = 0;
            $.ajax({
                type: "POST",
                url: "/DoctorVisitRegisterNew/GetDvrWpProductList",
                data: JSON.stringify({ model: model }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var vDvr = data.DVR;
                    var vWp = data.WP;
                    var vProductList = data.ProductList;

                    console.log(vProductList);
                    if (vDvr.length > 0) {
                        $("#Parameter2").html("DVR: Yes");
                    }
                    else {
                        $("#Parameter2").html("DVR: No");
                    }
                    if (vWp.length > 0) {
                        value = value + 1;
                        $('#WPGrid').show();
                        $('#WPGrid').data('kendoGrid').dataSource.data(vWp);
                    }    
                    if (vProductList.length > 0) {
                        $('#ProductCode').empty();
                        $.each(vProductList, function (i, item) {
                            $('#ProductCode').append($('<option>', { value: item.ProductCode, html: item.ProductName }, '<option/>'));
                        });
                    }
                },
                error: function () {
                    alert('Error occured!');
                },
            });


            //$.ajax({
            //    type: "POST",
            //    url: "/DoctorVisitRegisterNew/GetDVR",
            //    data: JSON.stringify({ model: model }),
            //    contentType: "application/json; charset=utf-8",
            //    dataType: "json",
            //    success: function (data) {
            //        if (data.length > 0) {
            //            $("#Parameter2").html("DVR: Yes");
            //        }
            //        else {
            //            $("#Parameter2").html("DVR: No");
            //        }

            //    },
            //    error: function () {
            //        alert('Error occured!');
            //    },
            //});
            //$.ajax({
            //    type: "POST",
            //    url: "/DoctorVisitRegisterNew/GetWP",
            //    data: JSON.stringify({ model: model }),
            //    contentType: "application/json; charset=utf-8",
            //    dataType: "json",
            //    success: function (data) {
            //        if (data.length > 0) {
            //            value = value + 1;
            //            $('#WPGrid').show();
            //            $('#WPGrid').data('kendoGrid').dataSource.data(data);
            //        }                
            //    },
            //    error: function () {
            //        alert('Error occured!');
            //    },
            //});


            if (value > 0) {
                DetailPopupWindow.close();
            }


        }



        var DetailPopupWindow = $("#DetailPopupWindow").kendoWindow({
            width: "50%",
            height: "60%",
            draggable: true,
            modal: true,
            resizable: true,
            title: "List",
        }).data("kendoWindow");




        var WPGrid = $('#WPGrid').kendoGrid({
            dataSource: new kendo.data.DataSource({
                batch: true,
                schema: {
                    model: {
                        id: "MPGroup",
                        fields: {
                            MPGroup: { type: "string" },
                            SetDate: { type: "string" },
                            ProductCode: { type: "string" },
                            ProductName: { type: "string" },
                            Quantity: { type: "string" }

                        }
                    }
                },
                pageSize: 10,
            }),
            pageable: {
                //refresh: true,
                pageSizes: true, buttonCount: 5
            },
            dataBound: function (e) {
                AutoFitColumn(this.element[0].id);
            },

            scrollable: true,
            sortable: true,
            filterable: false,
            editable: false,
            selectable: "row",
            navigatable: true,
            groupable: { messages: { empty: "WP List" } },
            edit: function (e) {
                $('input[name = "ProductCode"]').attr("readonly", true);
                $('input[name = "ProductName"]').attr("readonly", true);
                $('input[name = "MPGroup"]').attr("readonly", true);

            },
            columnMenu: false,
            reorderable: false,
            resizable: false,
            resize: function (e) {
                this.table.height(this.element.height() + this.table.height() - 1);
            },
            columns: [
                { field: "MPGroup", title: "MPGroup", hidden: true },
                { field: "SetDate", title: "Set Date", hidden: true },
                { field: "ProductCode", title: "Product Code" },
                { field: "ProductName", title: "Product Name" },
                { field: "Quantity", title: "Quantity" },
                { command: [{ name: "UpdateRow", text: "Update", imageClass: "k-icon k-edit", click: UpdateData }], title: "Update", hidden: true, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;text-align: center;" } },
                { command: [{ name: "DeletedRow", text: "X", className: "RemoveEnableDisable", imageClass: "k-icon k-i-close", click: DeleteData }], title: "X", hidden: true, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 14px;text-align: center;" } }

            ]

        }).data('kendoGrid');


        var updateItem = {};
        function UpdateData(e) {
            e.preventDefault();
            updateItem = WPGrid.dataItem($(e.currentTarget).closest("tr"));

            WPUpdate(updateItem);
        };
        var removeItem = {};
        function DeleteData(e) {
            e.preventDefault();
            removeItem = WPGrid.dataItem($(e.currentTarget).closest("tr"));

            WPDelete(removeItem);

            WPGrid.dataSource.remove(removeItem);
        }
        function WPUpdate(data) {

            var vCellValue = $('#vCellValue').val();
            var n = vCellValue.indexOf("E");

            var Input = InputValidation('MonthNumber') + InputValidation('Year');

            if (Input == 0 && data.ProductCode != "" && n != 0) {


                var model = {};

                model.ProductCode = data.ProductCode;
                model.MPGroup = data.MPGroup;
                model.Quantity = data.Quantity;
                model.SetDate = data.SetDate;

                //model.MonthNumber = $('#MonthNumber').val();
                //model.Year = $('#Year').val();
                model.ShiftName = $('#ShiftName').val();
                model.DoctorID = $('#DoctorID').val();
                model.MPGroup = $('#MPGroup').val();

                $.ajax({
                    url: '/DoctorVisitRegisterNew/OperationsModeWPUpdate',
                    data: JSON.stringify(model),
                    type: 'POST',
                    contentType: 'application/json;',
                    dataType: 'json',
                    success: function (data) {
                        if (data.Status == "Yes") {
                            OperationMsg(data.Mode);
                            toastr.success($("#MessageText").html());
                        }
                        else if (data.Status == "No") {
                            OperationMsg(data.Mode);
                            toastr.success($("#MessageText").html());
                        }
                        else {
                            ErrorFrmServerMsg(data.Status);
                            toastr.warning($("#MessageText").html());
                        }
                    },
                    error: function () {
                        ErrorFrmClientMsg();
                        toastr.warning($("#MessageText").html());
                    },
                    // complete: function () { CompletedMsg(); },
                }); //End of ajax call
            }
            else {
                ValidationMsg();
                toastr.info($("#MessageText").html());
            }
        }
        function WPDelete(data) {
            var vCellValue = $('#vCellValue').val();
            var n = vCellValue.indexOf("E");
            var Input = InputValidation('MonthNumber') + InputValidation('Year');

            if (Input == 0 && data.ProductCode != "" && n != 0) {

                var model = {};
                model.ProductCode = data.ProductCode;
                model.MPGroup = data.MPGroup;
                model.Quantity = data.Quantity;
                model.SetDate = data.SetDate;

                //model.MonthNumber = $('#MonthNumber').val();
                //model.Year = $('#Year').val();
                model.DoctorID = $('#DoctorID').val();
                model.MPGroup = $('#MPGroup').val();
                model.ShiftName = $('#ShiftName').val();
                $.ajax({
                    url: '/DoctorVisitRegisterNew/OperationsModeWPVoid',
                    data: JSON.stringify(model),
                    type: 'POST',
                    contentType: 'application/json;',
                    dataType: 'json',
                    success: function (data) {
                        if (data.Status == "Yes") {
                            OperationMsg(data.Mode);
                            toastr.success($("#MessageText").html());
                        }
                        else {
                            ErrorFrmServerMsg(data.Status);
                            toastr.warning($("#MessageText").html());
                        }
                    },
                    error: function () {
                        ErrorFrmClientMsg();
                        toastr.warning($("#MessageText").html());
                    },
                    // complete: function () { CompletedMsg(); },
                }); //End of ajax call
            }
            else {
                ValidationMsg();
                toastr.info($("#MessageText").html());
            }
        };

        function SetButtonAction(vCellValue) {
            var FromDate = $("#CurrentDate").val();
            var ToDate = $("#SetDate").val();

            var fromDateParts = FromDate.split("-");
            var fromDateObject = new Date(fromDateParts[2], fromDateParts[1] - 1, fromDateParts[0]);

            var toDateParts = ToDate.split("-");
            var toDateObject = new Date(toDateParts[2], toDateParts[1] - 1, toDateParts[0]);


            if (fromDateObject <= toDateObject) {
                $("#btnSaveDVR").attr("disabled", false);
                $("#btnDeleteDVR").attr("disabled", false);
                $("#btnSaveWP").attr("disabled", false);
                $("#btnDeleteWP").attr("disabled", false);
            }
            else {

                $("#btnSaveDVR").attr("disabled", true);
                $("#btnDeleteDVR").attr("disabled", true);
                $("#btnSaveWP").attr("disabled", true);
                $("#btnDeleteWP").attr("disabled", true);

            }

            //alert(vCellValue);
            var n = vCellValue.indexOf("E");
            if (n == 0) {
                $("#btnSaveDVR").attr("disabled", true);
                $("#btnDeleteDVR").attr("disabled", true);
                $("#btnSaveWP").attr("disabled", true);
                $("#btnDeleteWP").attr("disabled", true);
            }


            //for (var i = 0; i < vCellValue.length; i++) {
            //    if (vCellValue.charAt(i) == "E") {
            //        $("#btnSaveDVR").attr("disabled", true);
            //        $("#btnDeleteDVR").attr("disabled", true);
            //        $("#btnSaveWP").attr("disabled", true);
            //        $("#btnDeleteWP").attr("disabled", true);
            //    }
            //}
        }

        $('#WPGrid').click(function () {
            var gridData = $("#WPGrid").data("kendoGrid");
            var selectedItem = (gridData.dataItem(gridData.select()));
            $("#ProductCode").val(selectedItem.ProductCode);
            $("#Quantity").val(selectedItem.Quantity);
            $("#MPGroup").val(selectedItem.MPGroup);
            $("#SetDate").val(selectedItem.SetDate);

        });

        $('#btnSaveDVR').click(function () {
            var model = {};

            model.SetDate = $('#SetDate').val();
            model.ShiftName = $('#ShiftName').val();
            model.DoctorID = $('#DoctorID').val();
            model.DoctorName = $('#DoctorName').val();
            model.MPGroup = $('#MPGroup').val();


            var ShiftName = $('#ShiftName').val();
            var DayNumber = $('#SetDate').val().slice(0, 2);
            var vCellValue = $('#vCellValue').val();


            $.ajax({
                url: '/DoctorVisitRegisterNew/OperationsModeDVR',
                data: JSON.stringify(model),
                type: 'POST',
                contentType: 'application/json;',
                dataType: 'json',
                success: function (data) {
                    if (data.Status == "Yes") {
                        OperationMsg(data.Mode);
                        toastr.success($("#MessageText").html());
                        ValueUpdateOnNewWindow(model, vCellValue, DayNumber, ShiftName);
                        ReloadData();
                    }
                    else if (data.Status == "No") {
                        OperationMsg(data.Mode);
                        toastr.info($("#MessageText").html());
                    }
                    else {
                        ErrorFrmServerMsg(data.Status);
                        toastr.warning($("#MessageText").html());
                    }

                },
                error: function () {
                    ErrorFrmClientMsg();
                    toastr.warning($("#MessageText").html());
                },
                // complete: function () { CompletedMsg(); },
            }); //End of ajax call


        });

        $('#btnDeleteDVR').click(function () {
            var model = {};

            model.SetDate = $('#SetDate').val();
            model.ShiftName = $('#ShiftName').val();
            model.DoctorID = $('#DoctorID').val();
            model.DoctorName = $('#DoctorName').val();
            model.MPGroup = $('#MPGroup').val();


            var ShiftName = $('#ShiftName').val();
            var DayNumber = $('#SetDate').val().slice(0, 2);
            var vCellValue = $('#vCellValue').val();

            $.ajax({
                url: '/DoctorVisitRegisterNew/OperationsModeDVRWPDelete',
                data: JSON.stringify(model),
                type: 'POST',
                contentType: 'application/json;',
                dataType: 'json',
                success: function (data) {
                    if (data.Status == "Yes") {
                        OperationMsg(data.Mode);
                        toastr.success($("#MessageText").html());
                        ValueUpdateOnNewWindow(model, vCellValue, DayNumber, ShiftName);
                        ReloadData();
                    }
                    else if (data.Status == "No") {
                        OperationMsg(data.Mode);
                        toastr.info($("#MessageText").html());
                    }
                    else {
                        ErrorFrmServerMsg(data.Status);
                        toastr.warning($("#MessageText").html());
                    }

                },
                error: function () {
                    ErrorFrmClientMsg();
                    toastr.warning($("#MessageText").html());
                },
                // complete: function () { CompletedMsg(); },
            }); //End of ajax call

        });

        $('#btnSaveWP').click(function () {
            var Input = InputValidation('ProductCode') + InputValidation('Quantity');

            var ShiftName = $('#ShiftName').val();
            var DayNumber = $('#SetDate').val().slice(0, 2);
            var vCellValue = $('#vCellValue').val();


            if (Input == 0) {

                var model = {};


                model.SetDate = $('#SetDate').val();
                model.ProductCode = $('#ProductCode').val();
                model.DoctorID = $('#DoctorID').val();
                model.DoctorName = $('#DoctorName').val();
                model.Quantity = $('#Quantity').val();
                model.ShiftName = $('#ShiftName').val();
                model.MPGroup = $('#MPGroup').val();

                $.ajax({
                    url: '/DoctorVisitRegisterNew/OperationsModeWP',
                    data: JSON.stringify(model),
                    type: 'POST',
                    contentType: 'application/json;',
                    dataType: 'json',
                    success: function (data) {
                        if (data.Status == "Yes") {
                            OperationMsg(data.Mode);
                            toastr.success($("#MessageText").html());

                            ValueUpdateOnNewWindow(model, vCellValue, DayNumber, ShiftName);
                            ReloadData();

                        }
                        else if (data.Status == "No") {
                            OperationMsg(data.Mode);
                            toastr.info($("#MessageText").html());
                        }
                        else {
                            ErrorFrmServerMsg(data.Status);
                            toastr.warning($("#MessageText").html());
                        }

                    },
                    error: function () {
                        ErrorFrmClientMsg();
                        toastr.warning($("#MessageText").html());
                    },
                    // complete: function () { CompletedMsg(); },
                }); //End of ajax call
            }
            else {
                ValidationMsg();
                toastr.info($("#MessageText").html());
            }

        });

        $('#btnDeleteWP').click(function () {
            var Input = InputValidation('ProductCode') + InputValidation('Quantity');

            var ShiftName = $('#ShiftName').val();
            var DayNumber = $('#SetDate').val().slice(0, 2);
            var vCellValue = $('#vCellValue').val();
            if (Input == 0) {

                var model = {};

                model.SetDate = $('#SetDate').val();
                model.ProductCode = $('#ProductCode').val();
                model.DoctorID = $('#DoctorID').val();
                model.DoctorName = $('#DoctorName').val();
                model.Quantity = $('#Quantity').val();
                model.ShiftName = $('#ShiftName').val();
                model.MPGroup = $('#MPGroup').val();

                $.ajax({
                    url: '/DoctorVisitRegisterNew/OperationsModeDeleteWP',
                    data: JSON.stringify(model),
                    type: 'POST',
                    contentType: 'application/json;',
                    dataType: 'json',
                    success: function (data) {
                        if (data.Status == "Yes") {
                            OperationMsg(data.Mode);
                            toastr.success($("#MessageText").html());

                            ValueUpdateOnNewWindow(model, vCellValue, DayNumber, ShiftName);
                            ReloadData();

                        }
                        else if (data.Status == "No") {
                            OperationMsg(data.Mode);
                            toastr.info($("#MessageText").html());
                        }
                        else {
                            ErrorFrmServerMsg(data.Status);
                            toastr.warning($("#MessageText").html());
                        }

                    },
                    error: function () {
                        ErrorFrmClientMsg();
                        toastr.warning($("#MessageText").html());
                    },
                    // complete: function () { CompletedMsg(); },
                }); //End of ajax call
            }
            else {
                ValidationMsg();
                toastr.info($("#MessageText").html());
            }

        });
    });
</script>


<script language="javascript" type="text/javascript">
    
    function InputValidationPdfExcel() {
        var Input = InputValidation('MonthNumber') + InputValidation('Year') + InputValidation('RegionCode') + InputValidation('TerritoryManagerID') + InputValidation('MPGroup');
        if (Input == 0) {
            return true;
        }
        else
            return false;
    }

</script>










<div class="box-header with-border">
    <form class="form" action="/DoctorVisitRegisterNew/Export" id="R1Form" method="post" name="H1Form" target="_blank">

        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-2 col-lg-2"><div id="MessageText"></div></div>
            <div class="col-xs-0 col-sm-0 col-md-10 col-lg-10">
                <div style="text-align:right;">
                    <input type="checkbox" id="IsActive" class="chk" name="IsActive"> <label for="IsActive"> Hide</label>
                    <button id="btnView" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-file"></i> View</button>
                    <button id="btnStatus" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-check"></i> Status</button>
                    <button id="btnSave" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-ok"></i> Approve</button>
      
                    @*<button id="btnZoomingView" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-zoom-in"></i> Zoom</button>*@

                    <button type="submit" id="btnExcel" name="ExportType" value="Excel" class="btn btn-primary btn-sm" onclick="return InputValidationPdfExcel();" formaction="/DoctorVisitRegisterNew/Export" data-toggle="tooltip" data-placement="right" title="[Mandatory: Month, Year, Region,TM,MPO]"><i class="glyphicon glyphicon-envelope"></i> Excel </button>
                    <button type="submit" id="btnPDF" name="ExportType" value="PDF" class="btn btn-primary btn-sm" onclick="return InputValidationPdfExcel();" formaction="/DoctorVisitRegisterNew/Export" data-toggle="tooltip" data-placement="right" title="[Mandatory: Month, Year, Region,TM,MPO]"><i class="glyphicon glyphicon-book"></i> Pdf </button>


                </div>
            </div>
        </div>

        <div class="box-body">
            <div class="row" id="divValueParameter">
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2"> Month - Year :</div>
                    <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3">
                        <div class="input-group">
                            <select id="MonthNumber" name="MonthNumber" class="RequiredField form-control"></select>
                            <span class="input-group-btn" style="width:2px;"></span>
                            <input type="text" id="Year" name="Year" class="datepicker RequiredField form-control" />
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3"></div>
                    <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3">
                        <input type="hidden" id="MasterStatus" name="MasterStatus" class="form-control RequiredField" readonly="readonly">
                        <span style="background-color:lightskyblue;display:none" id="MsgStatus"></span>

                    </div>
                </div>


                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Region Name :</div>
                    <div class="col-xs-0 col-sm-0 col-md-4 col-lg-4">
                        <select id="RegionCode" name="RegionCode" class="RequiredField form-control"></select>
                        <input type="hidden" id="RegionName" name="RegionName" class="RequiredField form-control">
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Supervisor :</div>
                    <div class="col-xs-0 col-sm-0 col-md-4 col-lg-4">
                        <select id="TerritoryManagerID" name="TerritoryManagerID" class="RequiredField form-control"></select>
                        <input type="hidden" id="TerritoryManagerName" name="TerritoryManagerName" class="RequiredField form-control">
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">FF Name :</div>
                    <div class="col-xs-0 col-sm-0 col-md-4 col-lg-4">
                        <select id="MPGroup" name="MPGroup" class="RequiredField form-control"></select>
                        <input type="hidden" id="MPOName" name="MPOName" class="RequiredField form-control">
                    </div>
                </div>

            </div>
        </div>
    </form>
    <div class="row">
        <div id="MainGrid" class="MainGrid"></div>
    </div>

    <div class="row">
        <div id="PopupWindow" class="PopupWindowLayout" style="display: none;">
            <div id="PopupWindowGrid" class="PopUpGrid"></div>
        </div>
    </div>

    <div id="DetailPopupWindow" class="PopupWindowLayout" style="display: none;">
        <div class="input-group">
            <div id="Parameter"></div><span class="input-group-btn" style="width:5px;"></span><div style="background-color:lightskyblue" id="Parameter2"></div>
        </div>
        <div class="input-group">
            <div style="display:none">
                <input type="text" id="DoctorID" name="DoctorID">
                <input type="text" id="DoctorName" name="DoctorName">
                <input type="text" id="ShiftName" name="ShiftName">
                <input type="text" id="SetDate" name="SetDate">
                <input type="text" id="CurrentDate" class="date">
                <input type="text" id="vCellValue" class="date">
            </div>
        </div>
        <br />
        <div class="input-group">
            <span class="input-group-addon">Product :</span>
            <select id="ProductCode" name="ProductCode" class="RequiredField input-sm" >
                <option></option>
            </select>
        </div>
        <div class="input-group">
            <span class="input-group-addon">Quantity:</span>
            <input type="number" id="Quantity"  name="Quantity" size="5" min="0" max="500"  class="RequiredField input-sm">
        </div>
        <br />
        <div class="input-group">
            <span class="input-group-btn" style="width:10px;"></span>
            <button id="btnSaveDVR" class="btn btn-primary input-mini" type="button"><i class="glyphicon glyphicon-save-file"></i>Add DVR</button>
            <span class="input-group-btn" style="width:5px;"></span>
            <button id="btnDeleteDVR" class="btn btn-primary input-mini" type="button"><i class="glyphicon glyphicon-trash"></i>Delete DVR</button>
            <span class="input-group-btn" style="width:5px;"></span>
            <button id="btnSaveWP" class="btn btn-primary input-mini" type="button"><i class="glyphicon  glyphicon-save-file"></i>Add WP</button>
            <span class="input-group-btn" style="width:5px;"></span>
            <button id="btnDeleteWP" class="btn btn-primary input-mini" type="button"><i class="glyphicon  glyphicon-trash"></i>Delete WP</button>
        </div>
        <div class="input-group">
            <div id="WPGrid" class="PopUpGrid"></div>
        </div>
    </div>



</div>
<div id="divLoading" style="margin: 0px; padding: 0px; position: fixed; right: 0px;
    top: 0px; width: 100%; height: 100%; background-color: #666666; z-index: 30001;
    opacity: .8; filter: alpha(opacity=70);display:none">
    <p style="position: absolute; top: 50%; left: 50%; color: White;">
        <img src="~/Content/Images/loading.gif" />
    </p>
</div>

